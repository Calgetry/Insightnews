# InsightNews 管理后台 — 管理员使用手册

适用对象：负责日常运营、内容审核、数据导出及话题分析的 InsightNews 平台管理员。本文结合当前版本（最后更新：2025-12-01）的最新功能与流程，帮助您快速上手各模块并高效完成日常工作。

---

## 1. 系统概览与登录准备

- **推荐浏览器**：最新版 Microsoft Edge、Google Chrome 或 Firefox，分辨率 ≥ 1366×768。
- **访问入口**：部署环境提供的后台域名，例如 `https://admin.insightnews.example`。本地调试请使用静态服务器启动根目录。
- **账号要求**：管理员需事先开通账号；登录凭据由运维或安全团队分发。系统会为合法账号颁发 24 小时有效的 Bearer Token 并自动续期。
- **会话机制**：24 小时未操作自动登出；若检测到账号在其他设备登录，本地会话将失效并提示重新登录。

### 登录步骤
1. 打开 `index.html`（线上环境为后台首页）。
2. 输入用户名与密码；系统允许邮箱或工号形式的用户名。
3. 点击“登录”或直接按 Enter。按钮会在验证过程中禁用，以防重复提交。
4. 登录成功后 1 秒内跳转至“数据仪表盘”。若出现错误，提示框会显示原因（网络异常、凭据错误、接口超时等）。

> 提示：浏览器会缓存上一次成功登录的用户信息。若需切换账号，请在右上角点击头像菜单中的“退出登录”。

---

## 2. 全局导航与常用操作

- **侧边栏结构**：
  - “数据仪表盘”：查看整体指标与趋势。
  - “用户管理”：筛选、维护与导出用户资料。
  - “访话管理”：统一处理访问数据与热点话题。
- **顶部区域**：显示当前登录人姓名、日期与系统主题切换按钮。
- **主题模式**：点击右上角的太阳/月亮图标即可在亮色与暗色之间切换。系统会将选择记在本地，下次打开保持一致。
- **全局消息**：系统级成功或错误提示在右上角短暂弹出，3 秒后自动淡出。
- **安全退出**：点击“退出登录”→ 确认后返回登录页，并清空本地 token。

---

## 3. 数据仪表盘（dashboard.html）

目标：快速掌握站点运营状况。

- **欢迎横幅**：展示管理员昵称与当天日期，确认身份是否正确。
- **四大 KPI 卡片**：
  - 活跃用户数（Active Users）
  - 新增用户（New Users）
  - 热门话题数（Hot Topics）
  - 举报总数（Reports）
  系统首先尝试请求真实接口，若接口不可用则回退到模拟数据并标记更新时间。
- **图表区**：
  - 访问趋势：折线图展示最近 30 天访问量；支持 hover 查看具体数值。
  - 用户结构：柱状图展示不同用户类型的数量（游客、注册、付费等）。
  - 话题热度：环形图按话题关注度占比显示，中心文本列出总互动量。
- **活动日志**：列出最近的后台操作或用户行为（登录、内容下架等），便于排查问题。
- **刷新机制**：图表会在切换主题时自动重绘。如果需要强制刷新数据，请使用浏览器刷新或后续扩展的“刷新数据”按钮。

---

## 4. 用户管理（users.html）

目标：对用户进行检索、审核、编辑、批量操作及数据导出。

### 4.1 页面结构
- **工具栏**：快速搜索、展开高级筛选、重置条件、设置每页显示数量。
- **高级筛选面板**：包含以下条件（已与最新后端字段对齐）：
  - 用户状态：按 `AppConfig.USER_STATUS` 映射显示（如启用、禁用、待审核）。
  - 用户类型：例如普通、媒体号、机构号。
  - 注册时间范围：起止日期支持双向任意组合。
  - 排序方式：注册时间、最近活跃等。
  手机相关筛选已移除，以匹配后端现状。
- **数据表格**：显示用户列表并支持跨页勾选。表头勾选框控制当页选择，底部实时显示已选数量。
- **批量操作区**：当存在已选用户时出现，包括批量查看、批量删除、清空选择。
- **详情与编辑**：点击单行操作按钮可打开模态框查看基础资料或进入编辑模式。

### 4.2 搜索与筛选流程
1. 在搜索框输入关键词（支持姓名、邮箱、手机号模糊匹配）后点击“搜索”或按 Enter。
2. 若需精确筛选，点击“高级筛选”展开面板，选择状态/类型或设置日期范围。
3. 系统会即时刷新列表，并将条件同步到地址栏与本地存储；刷新页面后仍可保留。
4. 点击“重置条件”可一键恢复默认（清除搜索、筛选、页码与排序）。

### 4.3 选择与批量操作
- 勾选单行：复选框位于首列。切换分页时已选项会保留。
- 全选当前页：表头复选框 → 再次点击取消。
- 执行操作：在批量操作栏选择“批量查看”或“批量删除”。删除前会弹窗确认。
- 清空选择：使用“清除已选”按钮或在分页切换时取消勾选。

### 4.4 导出功能
- 点击工具栏中的“导出”按钮，选择 CSV 或 Excel。
- 导出的 Excel 文件包含以下列：姓名、邮箱、手机号、所属地区、注册时间、最近活跃时间、个人简介。所有字段以原始值输出，不再包含状态、性别或类型的映射列。
- 导出数据以当前筛选结果为准；若勾选了特定用户则优先导出勾选项。
- 导出大批量数据时请耐心等待提示完成，避免重复点击。

### 4.5 常见操作
- **查看详情**：点击“查看”按钮，弹窗展示完整信息与最近活动。
- **编辑保存**：在编辑模式中修改字段后点击“保存”。若接口未连通，系统会以 mock 形式演示成功提示。
- **新增用户**：点击“新建用户”按钮，按表单提示填写必填项并提交。

---

## 5. 访话管理（visits-topics.html）

目标：将访问统计与话题运营整合到一个界面，随时掌握热点动向并导出趋势数据。

### 5.1 页面导览
- **顶部概览卡片**：实时显示话题总数、关联新闻数、累计点赞、累计举报。数据由 `CombinedManager` 汇总维护，当访问或话题数据更新时会即时响应，无需手动刷新。
- **工具栏**：
  - 关键词搜索：对话题名称与新闻标题同时生效。
  - 筛选开关：用于显示扩展过滤条件（例如话题状态、标签）。
  - “刷新数据”按钮：重新拉取接口并触发统计更新。
  - “创建话题”“批量分配”等操作按钮：视权限与功能开放情况显示。
  - “导出趋势”：导出当前选中话题的时间序列数据。
- **话题列表（左侧）**：按热度排序，显示互动量、增长率等指标。点击列表项会同步右侧内容与图表。
- **新闻榜单（右侧）**：展示选中话题下的热点新闻，包含点赞、评论、收藏等指标；点击行可查看详情。
- **详情面板**：当选择话题或新闻时，中央图表区域展示访问量与互动指标趋势。

### 5.2 数据加载逻辑
1. 进入页面后系统并行请求话题服务与访问分析服务。
2. 若任一接口不可用，将自动降级到内置模拟数据，并在控制台给出提示。
3. 当 TopicsManager 或 VisitManager 成功拉取数据后，会通过自定义事件通知 CombinedManager 更新概览统计。该机制确保“关联新闻”数量在异步加载场景下仍然准确。

### 5.3 趋势图表操作
- **时间范围切换**：24 小时、7 天（168 小时）、30 天。切换后图表与导出数据同步更新。
- **缩放与平移**：按住 Ctrl 滚轮或拖拽可缩放；双击或点击“重置缩放”按钮恢复原始视图。
- **导出**：
  - CSV：下载当前时间序列的纯文本数据，适合快速分析。
  - Excel：生成带格式的表格，包含日期/时间、访问量、点赞、评论等列。
  - 文件命名自动包含话题名称与时间范围。

### 5.4 搜索与筛选
- 搜索框支持模糊匹配关键字，命中后话题列表与新闻榜单同时过滤。
- 当筛选条件变更或点击“刷新数据”时，系统会重新计算概览卡片的数值，并保持与当前列表一致。

---

## 6. 数据导出与文件管理

- **可导出模块**：用户管理（列表/选中集）、访话管理（单个话题的趋势数据）。
- **格式选择**：
  - `CSV`：体积小、兼容性好，打开后需注意 UTF-8 编码。
  - `Excel (.xlsx)`：包含自动列宽、表头加粗、条纹底色，适合直接对外共享。
- **文件保存位置**：由浏览器下载设置决定。建议提前设置固定目录便于归档。
- **常见问题**：
  - 下载无响应：检查浏览器是否阻止弹窗或下载。
  - 内容为空：确认当前筛选是否导致无数据可导出。
  - 字段缺失：用户导出仅包含基础字段（姓名、邮箱、手机号、地区、注册时间、最近活跃、简介），为符合最新数据合规策略。

---

## 7. 系统提示与错误处理

- **接口异常**：系统会在右上角显示“请求失败”“权限不足”等信息，并将详情保存在本地错误日志中。
- **登录失效**：如遇 401/403 响应，系统会清理本地凭据并提示重新登录。
- **网络超时**：默认 10 秒超时，超时会弹出“请求超时，请稍后重试”。建议检查网络或稍后刷新。
- **本地缓存**：包括主题设置、搜索记录、分页大小、已选用户等，均存储于浏览器 LocalStorage。若界面异常，可尝试清理浏览器缓存后重新登录。

---

## 8. 常见问题 (FAQ)

- **Q：登录后停留在白屏？**
  - A：请确认 API 服务器可访问；若后台接口全部不可用，页面会展示空状态并在控制台给出错误日志。
- **Q：为何找不到手机号完整度筛选？**
  - A：为保持前后端一致，最新版本已移除该选项。请改用状态或类型筛选。
- **Q：导出的 Excel 字段过少？**
  - A：根据合规要求，导出仅保留核心字段。若需扩展字段，请联系数据团队评估。
- **Q：访话管理页面的统计与列表不一致？**
  - A：请点击“刷新数据”或重新选择话题。若 API 实时返回不同步，可先使用导出功能分析，再反馈给数据团队。
- **Q：如何切换暗色主题？**
  - A：右上角图标点击一次即可。若希望恢复默认品牌色，可在主题设置中选择“重置”。

---

## 9. 维护建议与反馈渠道

- 定期检查浏览器是否自动屏蔽脚本或 Cookie，避免影响登录与导出。
- 当发现数据异常、按钮无响应或导出失败时，请截图控制台错误信息并联系技术支持（support@insightnews.example）。
- 若需新增功能或调整字段，请在需求单中注明涉及页面、操作流程及预期产出，方便研发评估。

祝您使用顺利，若有任何问题欢迎随时反馈！
